<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vocabulari</title>
  </head>
  <body>
    <div>
      <select id="lang">
        <option value="fi">Suomi</option>
        <option value="ca">Català</option>
      </select>
      <h2 id="word"></h2>
      <input autocomplete="off" type="text" id="response" />
      <button id="check">Check</button>
    </div>

    <script>
      const langEl = document.getElementById("lang");
      const wordEl = document.getElementById("word");
      const responseEl = document.getElementById("response");
      const checkEl = document.getElementById("check");

      const availableLangs = ["ca", "fi"];
      let lang = "fi";
      let score = 0;
      let count = 0;

      let words = {
        fi: {
          Aktivointi: "Activació",
          "Arvonlisävero (alv) ": "Impost sobre el valor afegit (IVA)",
          Bruttohinta: "Preu brut",
          Budjetti: "Pressupost",
          Dimensio: "Dimensió",
          "Ennakkoperintärekisteri ": "Registre de recollida anticipada",
          Ennakkovero: "Impost anticipat",
          Jaksotus: "Periodicitat",
          Kassavirta: "Flux de caixa",
          "Kiinteät kulut": "Costos fixes",
          Kustannuspaikka: "Lloc d'emissió",
          Käyttöpääoma: "Capital circulant",
          Käyttöomaisuus: "Immobilitzat",
          jaksottaminen: "periodització",
          "Käännetty arvonlisäverovelvollisuus":
            "Responsabilitat de l'IVA invertit",
          "Liikevaihto ": "Vendes",
          "Liiketulos ": "Benefici operatiu",
          "Lomapalkkavaraus ": "Reserva de pagament de vacances",
          "Likviditeetti ": "Liquiditat",
          "Luottotappio ": "Pèrdua de crèdit",
          "Maksuperuste ": "Base de pagament",
          "Muuttuvat kulut ": "Despeses canviants",
          "Myyntikate ": "Marge de vendes",
          "Nettohinta ": "Preu net",
          "Oma-aloitteiset verot ": "Impostos autoiniciats",
          "Oma pääoma ": "Capital propi",
          "Osatuloutus ": "Ingressos parcials",
          "Osinko ": "Dividend",
          "Poisto ": "Supressió",
          "Reskontra ": "Llibre major",
          "Sisäinen laskenta ": "Càlcul intern",
          "Suoriteperuste ": "Base d'acumulació",
          "SVOP, sijoitettu vapaa oma pääoma ": " capital lliure invertit",
          "Tase ": "Balanç",
          "Tilikausi ": "Període comptable",
          "Tilikauden tulos ": "El resultat de l'exercici",
          "Tilinpäätös ": "Estats financers",
          "Tosite ": "Vale",
          "Tuloslaskelma ": "Compte de resultats",
          "Työantajarekisteri ": "Registre d'empresaris",
          "Ulkoinen laskenta ": "Càlcul extern",
          "Vaihto-omaisuus ": "Inventari",
          "Vieras pääoma": "Capital prestat",
          Yksityisotto: "Recepció privada",
          Maananantai: "Dilluns",
          Tiistai: "Dimarts",
          Keskiviikko: "Dimecres",
          Torstai: "Dijous",
          Perjanai: "Divendres",
          Lauantai: "Dissabte",
          Sununtai: "Diumenge",
          Auto: "Cotxe",
          Bussi: "Bus",
          Suuri: "Gros",
          Janö: "Tenir set",
          Nälkäinen: "Tenir gana",
          Ruoka: "Menjar",
          Vesi: "Aigua",
          Nyt: "Ara",
          Kaupunki: "Ciutat",
          Koira: "Ca",
          Kissa: "Moix",
          Rakennus: "Edifici",
          Talo: "Casa",
          Koti: "Llar",
          Juhla: "Festa",
          Pitää: "Agradar",
          Nähdä: "Veure",
          Kiitos: "Gràcies",
          Kävellä: "Caminar",
          Tehdä: "Fer",
          Pelata: "Jugar",
          Miksi: "Per què",
          Siksi: "Perquè",
          Missä: "A on",
          Kuka: "Qui",
          Jalkapallo: "Futbol",
          Pallo: "Pilota",
          Kone: "Màquina",
          Lentää: "Volar",
          Lentikone: "Avió",
          Tieto: "Coneixement",
          Tietokone: "Ordinador",
          Avoin: "Obert",
          Usein: "Normalment",
          Ilma: "Aire",
          Korkea: "Alt",
          Ystävä: "Amic",
          Oppia: "Aprendre",
          Paljon: "Molt",
          Todella: "Realment",
          Artikkeli: "Article",
          Apu: "Ayuda",
          Tarvita: "Necessitar",
          Sinun: "El teu",
          Minun: "El meu",
          Lohi: "Salmó",
          Muikku: "Peixet",
          Kala: "Peix",
          Myydä: "Vendre",
          Kauppa: "Comerç",
          Ostaa: "Comprar",
          Mennä: "Anar",
          Hauska: "Divertit",
          Kaunis: "Guapa",
          Komea: "Guapo",
          "Kuinka voit?": "Com estàs?",
          "Voin erittäin hyvin": "Estic bé",
          "Mitä kuuluu?": "Què tal?",
          "Ei paha": "Gens malament",
          Paha: "Dolent",
          Ei: "No",
          No: "Well",
          Kiitos: "Gràcies",
          Loistava: "Molt bé",
          "Anna minulle kuitti": "Per favor, dona'm un ticket",
          "Ole hyvä": "De res",
          "Anteeksi hetki": "Perdona'm un moment",
          "Anteeksi myöhästymisemi": "Perdona'm per arribar tard",
          "Autan mielelläni": "Feliç d'ajudar",
          "Auttaisitko minua?": "M'ajudaries?",
          "Ei hätää": "Cap problema",
          "Kanssasi": "Amb tu",
          "En ole varma": "No estic segur",
          "Varma": "Segur",
          "En tiedä": "No ho sé",
          "En voi hyvin": "No me trob bé",
          "En ymmärrä": "No ho entenc",
          "Entä juoma?": "Vols un glop?",
          "Haluaisin juoman": "Voldria un glop",
          "Hetki, kiitos": "Un moment, sisplau",
          "Sataa": "Pluja",
          "Sata": "Cent",
          "Jotain vikaa?": "Passa res?",
          "Jätä minut rauhaan": "Deixa'm en pau",
          "Omistaa": "Tenir",
          "Kiitos soitosta": "Gràcies per telefonar",
          "Kirjoittaa": "Escriure",
          "Kuka": "Qui",
          "Voittaa": "Guanyar",
          "Käytäaä": "Emprar",
          
        },
      };
      
      const swapObject = (json) => {
        let newJson = {};
        Object.keys(json).forEach(key => {
          const value = json[key];
          newJson[value] = key;
        });
        
        return newJson;
      }
      
      words.ca = swapObject(words.fi);

      const changeLang = () => {
        lang = availableLangs.includes(langEl.value) ? langEl.value : "ca";
        nextWord();
      };

      const formatWord = (word) => {
        return word.replace(/\s?$/, "").toLowerCase();
      };

      const checkWord = () => {
        const word = formatWord(wordEl.innerText);
        const response = formatWord(responseEl.value);
        const wordsKey = Object.keys(words[lang]).find((checkWord) => {
          return formatWord(checkWord) === word;
        });
        const translation = formatWord(words[lang][wordsKey]);
        if (!translation) return false;
        if (translation === response) return true;
        return translation;
      };

      const isBoolean = (val) => "boolean" === typeof val;

      const execCheck = () => {
        count++;
        const result = checkWord();
        if (isBoolean(result) && result) {
          score++;
          alert("Correcte!");
          nextWord();
          return;
        }

        alert(`La traducció correcta és: ${result}`);
        nextWord();
      };

      const nextWord = () => {
        const index = Math.floor(
          Math.random() * Object.keys(words[lang]).length
        );
        wordEl.innerText = Object.keys(words[lang])[index];
        responseEl.value = "";
      };

      nextWord();

      document.addEventListener("keypress", (e) => {
        if (e.keyCode === 13) checkEl.click();
      });
      checkEl.addEventListener("click", execCheck);
      langEl.addEventListener("change", changeLang);
    </script>
  </body>
</html>
